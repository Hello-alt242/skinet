{"version":3,"sources":["webpack:///src/app/account/login/login.component.html","webpack:///src/app/account/register/register.component.html","webpack:///src/app/account/account-routing.module.ts","webpack:///src/app/account/account.module.ts","webpack:///src/app/account/login/login.component.scss","webpack:///src/app/account/login/login.component.ts","webpack:///src/app/account/register/register.component.scss","webpack:///src/app/account/register/register.component.ts"],"names":["routes","path","component","AccountRoutingModule","declarations","imports","forChild","exports","AccountModule","LoginComponent","accountService","router","activatedRoute","returnUrl","snapshot","queryParams","createLoginForm","loginForm","email","required","pattern","password","login","value","subscribe","navigateByUrl","error","console","log","selector","template","RegisterComponent","fb","createRegisterForm","registerForm","group","displayName","validateEmailNotTaken","register","response","errors","control","pipe","checkEmailExists","res","emailExists"],"mappings":"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","file":"account-account-module-es5.js","sourcesContent":["export default \"<div class=\\\"d-flex justify-content-center mt-5\\\">\\n  <div class=\\\"col-3\\\">\\n    <form [formGroup]=\\\"loginForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n      <div class=\\\"text-center mb-4\\\">\\n        <h1 class=\\\"h3 mb-3 font-weight-normal\\\">Login</h1>\\n      </div>\\n\\n      <app-text-input formControlName=\\\"email\\\" [label]=\\\"'Email Address'\\\"></app-text-input>\\n      <app-text-input formControlName=\\\"password\\\" [label]=\\\"'Password'\\\" [type]=\\\"'password'\\\"></app-text-input>\\n\\n      <button [disabled]=\\\"loginForm.invalid\\\" class=\\\"btn btn-lg btn-primary btn-block\\\" type=\\\"submit\\\">Sign in</button>\\n    </form>\\n  </div>\\n</div>\\n\";","export default \"<div class=\\\"d-flex justify-content-center mt-5\\\">\\n  <div class=\\\"col-3\\\">\\n    <form [formGroup]=\\\"registerForm\\\" (ngSubmit)=\\\"onSubmit()\\\">\\n      <div class=\\\"text-center mb-4\\\">\\n        <h1 class=\\\"h3 mb-3 font-weight-normal\\\">Register</h1>\\n      </div>\\n\\n      <app-text-input formControlName=\\\"displayName\\\" [label]=\\\"'Display Name'\\\"></app-text-input>\\n      <app-text-input formControlName=\\\"email\\\" [label]=\\\"'Email Address'\\\"></app-text-input>\\n      <app-text-input formControlName=\\\"password\\\" [label]=\\\"'Password'\\\" [type]=\\\"'password'\\\"></app-text-input>\\n\\n      <ul class=\\\"text-danger list-unstyled\\\" *ngIf=\\\"errors\\\">\\n        <li *ngFor=\\\"let error of errors\\\">\\n          {{error}}\\n        </li>\\n      </ul>\\n\\n      <button class=\\\"btn btn-lg btn-primary btn-block\\\" type=\\\"submit\\\">Register</button>\\n    </form>\\n  </div>\\n</div>\\n\";","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {RouterModule, Routes} from \"@angular/router\";\nimport {LoginComponent} from \"./login/login.component\";\nimport {RegisterComponent} from \"./register/register.component\";\n\nconst routes: Routes = [\n  {path: 'login', component: LoginComponent},\n  {path: 'register', component: RegisterComponent}\n];\n\n\n@NgModule({\n  declarations: [],\n  imports: [\n    RouterModule.forChild(routes)\n  ],\n  exports: [RouterModule]\n})\nexport class AccountRoutingModule { }\n","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { LoginComponent } from './login/login.component';\nimport { RegisterComponent } from './register/register.component';\nimport {AccountRoutingModule} from \"./account-routing.module\";\nimport {SharedModule} from \"../shared/shared.module\";\n\n\n\n@NgModule({\n  declarations: [LoginComponent, RegisterComponent],\n  imports: [\n    CommonModule,\n    AccountRoutingModule,\n    SharedModule\n  ]\n})\nexport class AccountModule { }\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FjY291bnQvbG9naW4vbG9naW4uY29tcG9uZW50LnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormControl, Validators } from '@angular/forms';\nimport { AccountService } from '../account.service';\nimport { Router, ActivatedRoute } from '@angular/router';\n\n@Component({\n  selector: 'app-login',\n  templateUrl: './login.component.html',\n  styleUrls: ['./login.component.scss']\n})\nexport class LoginComponent implements OnInit {\n  loginForm: FormGroup;\n  returnUrl: string;\n\n  constructor(private accountService: AccountService, private router: Router, private activatedRoute: ActivatedRoute) { }\n\n  // tslint:disable-next-line: typedef\n  ngOnInit() {\n    this.returnUrl = this.activatedRoute.snapshot.queryParams.returnUrl || '/shop';\n    this.createLoginForm();\n  }\n\n  // tslint:disable-next-line: typedef\n  createLoginForm() {\n    this.loginForm = new FormGroup({\n      email: new FormControl('', [Validators.required, Validators\n        .pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')]),\n      password: new FormControl('', Validators.required)\n    });\n  }\n\n  // tslint:disable-next-line: typedef\n  onSubmit() {\n    this.accountService.login(this.loginForm.value).subscribe(() => {\n      this.router.navigateByUrl(this.returnUrl);\n    }, error => {\n      console.log(error);\n    });\n  }\n\n}\n","export default \"\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJzcmMvYXBwL2FjY291bnQvcmVnaXN0ZXIvcmVnaXN0ZXIuY29tcG9uZW50LnNjc3MifQ== */\";","import { Component, OnInit } from '@angular/core';\nimport { FormGroup, FormBuilder, Validators, AsyncValidatorFn } from '@angular/forms';\nimport { AccountService } from '../account.service';\nimport { Router } from '@angular/router';\nimport { timer, of } from 'rxjs';\nimport { switchMap, map } from 'rxjs/operators';\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.scss']\n})\nexport class RegisterComponent implements OnInit {\n  registerForm: FormGroup;\n  errors: string[];\n\n  constructor(private fb: FormBuilder, private accountService: AccountService, private router: Router) { }\n\n  ngOnInit() {\n    this.createRegisterForm();\n  }\n\n  createRegisterForm() {\n    this.registerForm = this.fb.group({\n      displayName: [null, [Validators.required]],\n      email: [null,\n        [Validators.required, Validators.pattern('^[\\\\w-\\\\.]+@([\\\\w-]+\\\\.)+[\\\\w-]{2,4}$')],\n        [this.validateEmailNotTaken()]\n      ],\n      password: [null, [Validators.required]]\n    });\n  }\n\n  onSubmit() {\n    this.accountService.register(this.registerForm.value).subscribe(response => {\n      this.router.navigateByUrl('/shop');\n    }, error => {\n      console.log(error);\n      this.errors = error.errors;\n    });\n  }\n\n  validateEmailNotTaken(): AsyncValidatorFn {\n    return control => {\n      return timer(500).pipe(\n        switchMap(() => {\n          if (!control.value) {\n            return of(null);\n          }\n          return this.accountService.checkEmailExists(control.value).pipe(\n            map(res => {\n              return res ? { emailExists: true } : null;\n            })\n          );\n        })\n      );\n    };\n  }\n\n}\n"]}